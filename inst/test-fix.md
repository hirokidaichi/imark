# imark テスト修正手順書

## テスト修正の基本フロー

1. テストを実行して問題を特定
2. 特定のテストファイルだけを実行して詳細を確認
3. 問題を修正
4. 修正したテストだけ再実行して確認
5. すべてのテストを実行して全体の整合性を確認
6. コード品質チェックを実行

## 重要なポイント

- **効率的な問題特定**: 失敗したテストだけを実行することで、修正プロセスを高速化
- **段階的な確認**: 修正→単体テスト→全体テストの流れで確実に進める
- **型エラーの優先修正**: TypeScriptの型エラーは早期に修正することで後続の問題を防止
- **関数シグネチャの確認**: 引数の数や型の不一致は関数定義を確認して適切に修正
- **ロガー対応**: 多くのテスト失敗はロガーの引数不足によるもの。関数呼び出し時にロガーを必ず渡す

## コマンドリファレンス

### テスト関連

```bash
# 全テスト実行
deno task test

# 特定のテスト実行
deno test -A src/path/to/specific.test.ts

# 例: カタログテストのみ実行
deno test -A src/commands/catalog.test.ts
```

### 品質チェック

```bash
# 型チェック
deno task check

# リント
deno task lint

# フォーマット
deno task fmt

# すべてのチェック実行
deno task check-all
```

## よくある問題と対応方法

1. **引数の不一致**: 関数呼び出しの引数が足りない場合は、関数定義を確認し必要なパラメータを追加
2. **型エラー**: 期待される型と実際の型が一致しない場合は、型変換または関数の修正を検討
3. **未定義変数**: importの漏れや変数名のタイプミスを確認
4. **非同期処理の問題**: async/awaitの使用が正しいか確認